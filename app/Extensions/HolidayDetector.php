<?php

namespace App\Extensions;

class HolidayDetector
{
    public static function isHoliday($date)
    {
        $result = array_merge(self::$holidays, self::getCurrentYearHolidays($date));
        return in_array($date, $result) ? 1 : 0;
    }

    private static function getCurrentYearHolidays($date)
    {
        $currentYear = date('Y', strtotime($date));
        $currentYearHilidays = [];
        foreach(self::$everyYearHolidays as $everyYearHoliday) {
            $currentYearHolidays[] = $currentYear . $everyYearHoliday;
        }
        return $currentYearHolidays;
    }

    static private $everyYearHolidays = [
        '-01-01',
        '-01-06',
        '-04-25',
        '-05-01',
        '-06-02',
        '-08-15',
        '-11-01',
        '-12-25',
        '-12-26',
    ];

    static private $holidays = [
        '2020-04-13',
        '2021-04-05',
        '2022-04-18',
        '2023-04-10',
        '2024-04-01',
        '2025-04-21',
        '2026-04-06',
        '2027-03-29',
        '2028-04-17',
        '2029-04-02',
        '2030-04-22',
        '2031-04-14',
        '2032-03-29',
        '2033-04-18',
        '2034-04-10',
        '2035-03-26',
        '2036-04-14',
        '2037-04-06',
        '2038-04-26',
        '2039-04-11',
        '2040-04-02',
        '2041-04-22',
        '2042-04-07',
        '2043-03-30',
        '2044-04-18',
        '2045-04-10',
        '2046-03-26',
        '2047-04-15',
        '2048-04-06',
        '2049-04-19',
        '2050-04-11',
        '2051-04-03',
        '2052-04-22',
        '2053-04-07',
        '2054-03-30',
        '2055-04-19',
        '2056-04-03',
        '2057-04-23',
        '2058-04-15',
        '2059-03-31',
        '2060-04-19',
        '2061-04-11',
        '2062-03-27',
        '2063-04-16',
        '2064-04-07',
        '2065-03-30',
        '2066-04-12',
        '2067-04-04',
        '2068-04-23',
        '2069-04-15',
        '2070-03-31',
        '2071-04-20',
        '2072-04-11',
        '2073-03-27',
        '2074-04-16',
        '2075-04-08',
        '2076-04-20',
        '2077-04-12',
        '2078-04-04',
        '2079-04-24',
        '2080-04-08',
        '2081-03-31',
        '2082-04-20',
        '2083-04-05',
        '2084-03-27',
        '2085-04-16',
        '2086-04-01',
        '2087-04-21',
        '2088-04-12',
        '2089-04-04',
        '2090-04-17',
        '2091-04-09',
        '2092-03-31',
        '2093-04-13',
        '2094-04-05',
        '2095-04-25',
        '2096-04-16',
        '2097-04-01',
        '2098-04-21',
        '2099-04-13',
    ];
}
